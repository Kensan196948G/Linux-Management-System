# 非機能要件定義書

**文書番号**: WEBUI-REQ-003
**バージョン**: 1.0
**作成日**: 2026-02-25
**対象システム**: Linux管理 WebUI サンプルシステム

---

## 1. パフォーマンス要件

### 1.1 応答時間

| 操作種別 | 目標応答時間 | 最大許容時間 |
|---------|------------|------------|
| ダッシュボード初期ロード | 2秒以内 | 5秒 |
| リソース状態取得（API） | 500ms以内 | 2秒 |
| ログ検索（1万行） | 3秒以内 | 10秒 |
| サービス操作（再起動等） | 30秒以内 | 120秒 |
| ユーザー一覧取得 | 1秒以内 | 3秒 |

### 1.2 スループット

| 項目 | 要件 |
|------|------|
| 同時接続ユーザー数 | 最大20ユーザー |
| API リクエスト処理 | 100 req/min |
| ログストリーミング | 最大10セッション同時 |
| バックグラウンドジョブ | 最大5ジョブ同時実行 |

### 1.3 データ量

| データ種別 | 想定量 |
|-----------|--------|
| 操作ログ（1日あたり） | 最大100,000件 |
| ログ保管期間 | 最低1年（365日分） |
| 監視データサンプリング間隔 | 5秒 |
| ダッシュボード表示データポイント | 直近24時間（288ポイント/指標） |

---

## 2. 可用性要件

### 2.1 稼働率

| 指標 | 要件 |
|------|------|
| 目標稼働率 | 99.5%以上（月次） |
| 計画停止 | 月1回・深夜2時間以内 |
| 障害復旧目標時間（RTO） | 2時間以内 |
| 復旧ポイント目標（RPO） | 24時間以内 |

### 2.2 障害対応

- systemd による自動起動・自動再起動
- ヘルスチェックエンドポイント（`GET /health`）による死活監視
- 異常終了時のアラートメール送信
- アプリケーション障害時もLinux本体の管理は継続可能

---

## 3. セキュリティ要件

### 3.1 認証・認可

| 要件 | 詳細 |
|------|------|
| 認証方式 | ローカル認証 ＋ LDAP/AD 連携（推奨） |
| パスワードポリシー | 12文字以上・英数字記号混在 |
| セッション有効期限 | 30分（無操作時自動タイムアウト） |
| 同時セッション数 | 1ユーザー1セッション |
| 多要素認証（MFA） | TOTP（Google Authenticator互換） |
| ブルートフォース対策 | 5回失敗で15分ロック |

### 3.2 通信セキュリティ

| 要件 | 詳細 |
|------|------|
| 通信プロトコル | HTTPS のみ（HTTP自動リダイレクト） |
| TLSバージョン | TLS 1.2以上（1.0/1.1禁止） |
| 使用可能暗号スイート | AES-128以上、PFS対応のみ |
| HSTS | 有効（max-age=31536000） |
| 自己署名証明書 | 開発環境のみ許可（本番禁止） |

### 3.3 アクセス制御

| 要件 | 詳細 |
|------|------|
| アクセス元制限 | 社内ネットワーク（IPアドレス制限） |
| APIアクセス | JWTトークン必須 |
| トークン有効期限 | 1時間（Refresh Token: 8時間） |
| CSRF対策 | CSRFトークン必須 |
| XSS対策 | 全出力のエスケープ・CSP設定 |

### 3.4 サーバー側セキュリティ

| 要件 | 詳細 |
|------|------|
| 実行権限 | 専用サービスアカウント（root常駐禁止） |
| sudo制限 | allowlist定義のラッパースクリプトのみ |
| コマンドインジェクション対策 | shell=False 必須・引数配列渡し |
| 機密情報管理 | 環境変数・シークレット管理ツール使用 |
| 依存ライブラリ | 定期的な脆弱性スキャン・更新 |

---

## 4. 運用・保守性要件

### 4.1 ログ管理

| 要件 | 詳細 |
|------|------|
| アプリケーションログ | INFO/WARN/ERROR レベル分類 |
| アクセスログ | 全APIアクセスの記録 |
| 操作監査ログ | 変更・操作系APIの詳細記録 |
| ログ形式 | JSON形式（機械解析容易性） |
| ログローテーション | 日次・100MB超で自動ローテート |
| ログ保管場所 | 改ざん防止領域（追記専用） |

### 4.2 監視・アラート

| 要件 | 詳細 |
|------|------|
| ヘルスチェック | 30秒間隔の自動監視 |
| リソース閾値アラート | CPU>85%、メモリ>90%、ディスク>85% |
| エラーアラート | ERROR/CRITICAL ログでメール通知 |
| 監視ツール連携 | Prometheus メトリクスエンドポイント |

### 4.3 バックアップ

| 要件 | 詳細 |
|------|------|
| 設定ファイルバックアップ | 日次・30日分保管 |
| データベースバックアップ | 日次・フルバックアップ・30日分 |
| バックアップ保管場所 | 別ボリューム（同一ディスク禁止） |
| 復元テスト | 月1回実施 |

---

## 5. 拡張性・移植性要件

### 5.1 拡張性

| 要件 | 詳細 |
|------|------|
| モジュール構成 | 機能別モジュール分割（疎結合） |
| API versioning | /api/v1/ プレフィックス |
| プラグイン機構 | 新機能モジュールの追加容易性 |
| 設定外部化 | 環境別設定ファイルによる切り替え |

### 5.2 移植性

| 要件 | 詳細 |
|------|------|
| 対応ディストリビューション | Ubuntu 20.04+、RHEL 8+、Debian 11+ |
| Pythonバージョン | Python 3.10以上 |
| コンテナ対応 | Docker/Podman 動作対応 |

---

## 6. ユーザビリティ要件

### 6.1 画面・UI

| 要件 | 詳細 |
|------|------|
| 対応ブラウザ | Chrome 最新版、Firefox 最新版、Edge 最新版 |
| 対応解像度 | 1280x768以上 |
| レスポンシブ対応 | タブレット（1024px以上）対応 |
| アクセシビリティ | WCAG 2.1 AA準拠（可能な範囲） |
| 日本語対応 | UI全体の日本語化 |

### 6.2 操作性

| 要件 | 詳細 |
|------|------|
| 操作確認ダイアログ | 危険操作前の確認ステップ（2回確認） |
| エラーメッセージ | 日本語でのわかりやすいエラー表示 |
| ヘルプ | 各操作に簡易ヘルプテキスト |
| 操作完了通知 | 成功/失敗のトースト通知 |

---

## 7. コンプライアンス要件

| 要件 | 詳細 |
|------|------|
| 情報セキュリティ | ISMS（ISO/IEC 27001）整合 |
| 個人情報 | 個人情報保護法（PIPA）準拠 |
| 監査証跡 | 改ざん防止・1年以上保管 |
| アクセスログ | 最低1年間保管 |
| 脆弱性管理 | 月次脆弱性スキャン実施 |

---

*本文書はLinux管理WebUIサンプルシステムの非機能要件を定めるものである。*
