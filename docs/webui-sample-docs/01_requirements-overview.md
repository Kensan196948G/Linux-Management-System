# 要件定義書（概要）

**文書番号**: WEBUI-REQ-001
**バージョン**: 1.0
**作成日**: 2026-02-25
**対象システム**: Linux管理 WebUI サンプルシステム

---

## 1. 文書概要

| 項目 | 内容 |
|------|------|
| 文書名 | Linux管理WebUI 要件定義書（概要） |
| 対象システム | Webminライク Linux運用管理WebUI |
| 想定利用者 | IT部門 システム運用管理者 |
| 利用環境 | 社内ネットワーク（オンプレミス Linux） |
| 開発方式 | ClaudeCode 主導 ＋ 人間レビュー |

---

## 2. 背景・目的

### 2.1 背景

社内Linux環境では以下の課題が存在する。

- rootによる直接操作が多く、操作ログが不完全
- 権限管理が個人依存であり、標準化されていない
- 緊急作業時の承認フローが存在しない
- 既製品（Webmin等）は権限制御・監査ログが不十分

### 2.2 目的

本システムは以下を実現することを目的とする。

- root作業をWebUI経由で **安全に制御・記録**
- sudo権限を **最小化・可視化・申請フロー化**
- 全操作を **完全に証跡化**（誰が・いつ・何を実行）
- IT統制・ISMS要件に対応した **監査証跡の自動生成**

### 2.3 対象外（スコープ外）

- Webminとの互換性
- クラウド環境（AWS / Azure / GCP）への対応
- Windows サーバー管理
- ネットワーク機器管理

---

## 3. ステークホルダー

| 役割 | 関係者 | 主な関心事 |
|------|--------|-----------|
| システムオーナー | 情報システム部長 | コスト・リスク管理 |
| 主要ユーザー | サーバー運用担当者 | 操作性・安全性 |
| 監査担当 | 内部監査部門 | ログ証跡・権限管理 |
| セキュリティ担当 | CISO / セキュリティチーム | 脆弱性対策・アクセス制御 |
| 開発担当 | ITシステム開発チーム | 実装・保守 |

---

## 4. システム全体像

```
[ ブラウザ (管理者端末) ]
       ↓ HTTPS (TLS 1.3)
[ WebUI フロントエンド (HTML/JS) ]
       ↓ REST API (JSON)
[ バックエンド API (FastAPI) ]
       ↓ sudo (allowlistのみ)
[ Root Wrapper スクリプト ]
       ↓
[ Linux OS / systemctl / journalctl / cron ]
```

---

## 5. 主要機能要件サマリー

| カテゴリ | 機能 | 優先度 |
|---------|------|--------|
| 参照系 | システムリソース監視（CPU/メモリ/ディスク） | 必須 |
| 参照系 | サービス状態確認（systemctl status） | 必須 |
| 参照系 | ログ閲覧（journalctl） | 必須 |
| 参照系 | プロセス一覧（ps/top 相当） | 必須 |
| 操作系 | サービス再起動（許可リスト内） | 必須 |
| 操作系 | サービス停止（承認フロー経由） | 推奨 |
| 管理系 | ユーザー・グループ管理 | 必須 |
| 管理系 | 操作ログ・監査証跡 | 必須 |
| 管理系 | 承認フロー（2段階承認） | 推奨 |
| セキュリティ | 多要素認証（MFA） | 推奨 |
| セキュリティ | セッション管理 | 必須 |

---

## 6. 絶対禁止事項（要件レベル）

以下の機能は **いかなる場合も実装してはならない**。

| 禁止事項 | 理由 |
|---------|------|
| 任意コマンド実行（shell=True） | コマンドインジェクション直結 |
| /etc の直接編集 | 設定破壊・セキュリティ侵害 |
| bash/sh セッション起動 | 完全root奪取リスク |
| ユーザー・sudo の自由追加 | 権限昇格経路作成 |
| 認証なし操作 | 不正アクセスの許容 |

---

## 7. 制約条件

### 7.1 技術的制約

- バックエンドは root 権限で常駐させない
- sudo は allowlist 定義ラッパースクリプト経由のみ
- フロントエンドは静的ファイルのみ（SPA可）
- 外部依存ライブラリは最小化

### 7.2 組織的制約

- 本番環境変更は承認フロー必須
- 監査ログは1年以上保管
- セキュリティレビューを開発フェーズごとに実施

---

## 8. 開発フェーズ計画

| フェーズ | 内容 | 目標 |
|---------|------|------|
| v0.1 | 参照系のみ実装 | 安全な状態監視 |
| v0.2 | 限定操作機能追加 | サービス再起動等 |
| v0.3 | 承認フロー実装 | 運用統制強化 |
| v1.0 | 本番運用開始 | 全機能安定稼働 |

---

## 9. 関連文書

| 文書名 | 参照先 |
|-------|--------|
| 機能要件定義書 | 02_functional-requirements.md |
| 非機能要件定義書 | 03_nonfunctional-requirements.md |
| システムアーキテクチャ設計書 | 04_system-architecture.md |
| セキュリティ設計書 | 08_security-design.md |

---

*本文書は Linux管理WebUI サンプルシステムの要件定義概要を定めるものである。*
