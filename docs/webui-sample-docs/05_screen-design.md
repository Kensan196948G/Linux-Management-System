# 画面設計書（UI/UX仕様）

**文書番号**: WEBUI-UI-001
**バージョン**: 1.0
**作成日**: 2026-02-25
**対象システム**: Linux管理 WebUI サンプルシステム

---

## 1. 画面一覧

| 画面ID | 画面名 | URL | 対象ロール |
|--------|--------|-----|----------|
| SCR-001 | ログイン画面 | `/login` | 全ユーザー |
| SCR-002 | ダッシュボード | `/` | 全ロール |
| SCR-003 | サービス管理 | `/services` | 全ロール |
| SCR-004 | サービス詳細 | `/services/:name` | 全ロール |
| SCR-005 | プロセス一覧 | `/processes` | 全ロール |
| SCR-006 | ログ閲覧 | `/logs` | 全ロール |
| SCR-007 | ユーザー管理 | `/users` | Operator以上 |
| SCR-008 | 承認管理 | `/approvals` | Approver以上 |
| SCR-009 | 監査ログ | `/audit` | Operator以上 |
| SCR-010 | システム設定 | `/settings` | Admin のみ |
| SCR-011 | エラー画面 | `/error` | - |

---

## 2. 共通レイアウト設計

### 2.1 基本レイアウト（ログイン後）

```
┌─────────────────────────────────────────────────────────┐
│  HEADER: ロゴ | システム名 | ユーザー情報 | ログアウト         │
├──────────────┬──────────────────────────────────────────┤
│              │                                          │
│  SIDEBAR     │         メインコンテンツエリア              │
│  ナビゲーション │                                          │
│  - ダッシュ   │  ┌─────────────────────────────────┐     │
│  - サービス   │  │  パンくずリスト                   │     │
│  - プロセス   │  │  ページタイトル                   │     │
│  - ログ      │  │  ─────────────────────────────   │     │
│  - ユーザー   │  │  コンテンツ                       │     │
│  - 承認      │  │                                   │     │
│  - 監査      │  │                                   │     │
│  - 設定      │  └─────────────────────────────────┘     │
│              │                                          │
├──────────────┴──────────────────────────────────────────┤
│  FOOTER: バージョン情報 | コピーライト                       │
└─────────────────────────────────────────────────────────┘
```

### 2.2 カラースキーム

| 用途 | カラーコード | 説明 |
|------|------------|------|
| プライマリ | `#1E40AF` | メインボタン・アクティブ要素 |
| セカンダリ | `#6B7280` | 補助ボタン・非アクティブ |
| 成功 | `#16A34A` | 正常・稼働中 |
| 警告 | `#D97706` | 注意・閾値接近 |
| エラー | `#DC2626` | 異常・停止・失敗 |
| 情報 | `#0369A1` | 通知・情報 |
| 背景 | `#F9FAFB` | ページ背景 |
| サイドバー | `#111827` | サイドバー背景 |

---

## 3. 画面別設計

### 3.1 SCR-001: ログイン画面

**概要**: システムへの認証画面

```
┌─────────────────────────────────┐
│                                 │
│      🖥️ Linux管理 WebUI         │
│                                 │
│  ┌─────────────────────────┐   │
│  │  ユーザー名               │   │
│  │  [____________________] │   │
│  │                         │   │
│  │  パスワード               │   │
│  │  [____________________] │   │
│  │                         │   │
│  │  MFA コード（任意）       │   │
│  │  [______]               │   │
│  │                         │   │
│  │  [     ログイン     ]    │   │
│  └─────────────────────────┘   │
│                                 │
│  ※ 5回失敗でアカウントロック       │
└─────────────────────────────────┘
```

**バリデーション**:
- ユーザー名: 必須・最大64文字
- パスワード: 必須・最大128文字
- MFAコード: 6桁数字（MFA有効時必須）
- ログイン失敗時: 汎用エラーメッセージ（詳細非表示）

---

### 3.2 SCR-002: ダッシュボード

**概要**: システム全体の状態を一目で把握

```
┌─ ダッシュボード ───────────────────────────────────────────┐
│                                                          │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐   │
│  │ CPU使用率  │ │ MEM使用率 │ │ DISK使用  │ │ 稼働時間  │   │
│  │   42%    │ │   68%    │ │   55%    │ │ 15d 3h  │   │
│  │ [グラフ]  │ │ [グラフ]  │ │ [グラフ]  │ │         │   │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘   │
│                                                          │
│  ┌─ サービス状態 ─────────────────┐ ┌─ 最近の操作 ────────┐  │
│  │ ● nginx        稼働中        │ │ 14:23 svc-restart │  │
│  │ ● mysql        稼働中        │ │ 14:10 log-view    │  │
│  │ ● cron         稼働中        │ │ 13:55 svc-status  │  │
│  │ ⚠ backup-job   停止中        │ │ ...               │  │
│  └──────────────────────────────┘ └──────────────────┘  │
│                                                          │
│  ┌─ CPU/Memory 推移（24h）────────────────────────────┐   │
│  │  [折れ線グラフ]                                     │   │
│  └────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────┘
```

**自動更新**: 30秒ごとに自動リフレッシュ（手動更新ボタンあり）

---

### 3.3 SCR-003: サービス管理

**概要**: systemctlサービスの一覧と操作

```
┌─ サービス管理 ────────────────────────────────────────────┐
│                                                         │
│  検索: [____________]  状態フィルタ: [全て ▼]  [更新]      │
│                                                         │
│  ┌──────────────────────────────────────────────────┐  │
│  │ サービス名      │ 状態    │ 有効/無効 │ 操作        │  │
│  ├──────────────────────────────────────────────────┤  │
│  │ nginx          │ ● 稼働中 │ 有効      │[詳細][再起動]│  │
│  │ mysql          │ ● 稼働中 │ 有効      │[詳細][再起動]│  │
│  │ backup-service │ ⚠ 停止中 │ 有効      │[詳細][開始] │  │
│  │ old-app        │ ● 稼働中 │ 無効      │[詳細]       │  │
│  └──────────────────────────────────────────────────┘  │
│                                                         │
│  ※ 停止操作には Approver の承認が必要です                  │
└─────────────────────────────────────────────────────────┘
```

**操作ボタンの表示制御**:
- Viewer: 「詳細」のみ表示
- Operator: 「詳細」「再起動」「開始」表示
- Approver/Admin: 全ボタン表示

---

### 3.4 SCR-006: ログ閲覧

**概要**: systemd journalおよびアプリケーションログの検索・閲覧

```
┌─ ログ閲覧 ────────────────────────────────────────────────┐
│                                                          │
│  ┌─ 検索条件 ─────────────────────────────────────────┐   │
│  │ ソース: [systemd journal ▼]                        │   │
│  │ 期間:   [2026-02-25 00:00] ～ [2026-02-25 23:59]  │   │
│  │ レベル: [全て ▼]                                   │   │
│  │ キーワード: [_________________________]            │   │
│  │                        [検索] [クリア]             │   │
│  └────────────────────────────────────────────────────┘  │
│                                                          │
│  ┌─ ログ出力 ────────────────────────────── [DL▼] ────┐   │
│  │ Feb 25 14:23:01 server nginx[1234]: started        │   │
│  │ Feb 25 14:23:02 server systemd[1]: nginx started   │   │
│  │ Feb 25 14:30:15 server nginx[1234]: GET /health 200│   │
│  │ ...                                                │   │
│  │                          [< 前へ] [次へ >]         │   │
│  └────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────┘
```

---

### 3.5 危険操作確認ダイアログ

**概要**: 操作系アクション実行前の確認ステップ（2段階）

```
┌─ 操作確認 ─────────────────────────────────────┐
│                                               │
│  ⚠️  以下の操作を実行しますか？                  │
│                                               │
│  操作: サービス再起動                           │
│  対象: nginx                                  │
│  実行者: operator-user                        │
│  日時: 2026-02-25 14:35:00                    │
│                                               │
│  この操作は監査ログに記録されます。              │
│                                               │
│  確認のため「nginx」と入力してください:          │
│  [_________________________]                  │
│                                               │
│  [キャンセル]        [実行する]                 │
└───────────────────────────────────────────────┘
```

---

## 4. 通知・アラート設計

### 4.1 トースト通知

| 種別 | 表示位置 | 表示時間 | 内容 |
|------|---------|---------|------|
| 成功 | 右上 | 3秒 | 操作が成功した旨 |
| 失敗 | 右上 | 10秒（手動閉可） | エラー内容 |
| 警告 | 右上 | 5秒 | 注意事項 |
| 情報 | 右上 | 3秒 | 参考情報 |

### 4.2 リソース警告バナー

CPU/メモリ/ディスクが閾値超過時、ダッシュボード上部に警告バナーを表示。

```
┌────────────────────────────────────────────────────────┐
│  ⚠️  警告: ディスク使用率が 91% です。早急に確認してください。 [×]│
└────────────────────────────────────────────────────────┘
```

---

## 5. レスポンシブデザイン対応

| ブレークポイント | 幅 | レイアウト変更 |
|--------------|-----|--------------|
| デスクトップ | 1280px以上 | サイドバー常時表示 |
| タブレット | 1024px〜1279px | サイドバー折りたたみ |
| タブレット小 | 768px〜1023px | ハンバーガーメニュー |

> モバイル（768px未満）は対応範囲外

---

## 6. アクセシビリティ対応

- `alt` 属性: 全画像に設定
- フォーカス管理: キーボード操作対応（Tab/Enter）
- ARIAラベル: 動的要素に設定
- コントラスト比: WCAG AA準拠（4.5:1以上）
- エラーメッセージ: テキストのみで伝達（色だけに依存しない）

---

*本文書はLinux管理WebUIサンプルシステムの画面設計を定めるものである。*
