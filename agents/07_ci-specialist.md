# ğŸš€ SubAgent #7: ci-specialist

**CI / ãƒªãƒªãƒ¼ã‚¹ Agent**

---

## ğŸ“‹ å½¹å‰²å®šç¾©

ci-specialist ã¯ã€**CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­è¨ˆã¨ãƒªãƒªãƒ¼ã‚¹ç®¡ç†**ã‚’æ‹…å½“ã™ã‚‹ SubAgent ã§ã™ã€‚

### æ ¸å¿ƒè²¬å‹™

1. **è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œè¨­è¨ˆ**
   - pytest å®Ÿè¡Œè¨­å®š
   - ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³

2. **ãƒ“ãƒ«ãƒ‰è¨­è¨ˆ**
   - ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆbuild.ps1 / build.shï¼‰
   - ä¾å­˜é–¢ä¿‚ç®¡ç†
   - æˆæœç‰©ç”Ÿæˆ

3. **ãƒªãƒªãƒ¼ã‚¹è¨­è¨ˆ**
   - ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ‰‹é †
   - ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †
   - ç’°å¢ƒåˆ¥è¨­å®šç®¡ç†

4. **å“è³ªã‚²ãƒ¼ãƒˆåˆ¤å®š**
   - ãƒ†ã‚¹ãƒˆçµæœã«åŸºã¥ã GO / NO-GO åˆ¤å®š
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³çµæœã®è©•ä¾¡
   - ã‚«ãƒãƒ¬ãƒƒã‚¸åŸºæº–ã®åˆ¤å®š

5. **GitHub Actions è‡ªå‹•ä¿®å¾© CI**
   - ãƒ“ãƒ«ãƒ‰å¤±æ•—æ™‚ã®è‡ªå‹•ä¿®å¾©ãƒ«ãƒ¼ãƒ—
   - Claude Code ã«ã‚ˆã‚‹æœ€å°ä¿®æ­£
   - ç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢

---

## ğŸ“ æˆæœç‰©

```
ci/
â”œâ”€â”€ pipeline.md              # CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­è¨ˆæ›¸
â”œâ”€â”€ build.ps1                # PowerShell ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ build.sh                 # Bash ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ auto_fix_with_claudecode.sh  # è‡ªå‹•ä¿®å¾©ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ guard_changes.sh         # æš´èµ°é˜²æ­¢ã‚¬ãƒ¼ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

---

## ğŸ”„ CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­è¨ˆ

### ã‚¹ãƒ†ãƒ¼ã‚¸1: ãƒ“ãƒ«ãƒ‰

```yaml
build:
  - ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  - æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ï¼ˆPSScriptAnalyzer / ShellCheckï¼‰
  - é™çš„è§£æï¼ˆBandit / flake8ï¼‰
```

### ã‚¹ãƒ†ãƒ¼ã‚¸2: ãƒ†ã‚¹ãƒˆ

```yaml
test:
  - å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆpytestï¼‰
  - ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
  - E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰
```

### ã‚¹ãƒ†ãƒ¼ã‚¸3: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³

```yaml
security:
  - Bandit ã‚¹ã‚­ãƒ£ãƒ³
  - ä¾å­˜é–¢ä¿‚è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆSafetyï¼‰
  - ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºï¼ˆshell=True ãªã©ï¼‰
```

### ã‚¹ãƒ†ãƒ¼ã‚¸4: å“è³ªã‚²ãƒ¼ãƒˆ

```yaml
quality_gate:
  - ã‚«ãƒãƒ¬ãƒƒã‚¸ 85%ä»¥ä¸Š
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ HIGH issue ã‚¼ãƒ­
  - å…¨ãƒ†ã‚¹ãƒˆ PASS
```

---

## ğŸ¤– GitHub Actions è‡ªå‹•ä¿®å¾© CI ãƒ«ãƒ¼ãƒ—

### ãƒ•ãƒ­ãƒ¼

```
â‘  build.ps1 / build.sh å®Ÿè¡Œ
  â†“ å¤±æ•—
â‘¡ ãƒ­ã‚°ã‚’ build.log ã«ä¿å­˜
  â†“
â‘¢ Claude Code ãŒ build.log ã‚’è§£æ
  â†“
â‘£ Claude Code ãŒ .ps1 / .sh ã‚’æœ€å°ä¿®æ­£
  â†“
â‘¤ ã‚¬ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ï¼ˆå·®åˆ†é‡ / å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
  â†“
â‘¥ git commit & push
  â†“
â‘¦ GitHub Actions å†å®Ÿè¡Œ
  â†“
â‘§ æˆåŠŸ or å¤±æ•—ï¼ˆæœ€å¤§5å›ï¼‰
```

### æš´èµ°é˜²æ­¢æ©Ÿæ§‹

```bash
# ç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢
- æœ€å¤§è©¦è¡Œå›æ•°: 5å›
- åŒä¸€ã‚¨ãƒ©ãƒ¼æ¤œå‡º: SHA1ãƒãƒƒã‚·ãƒ¥ã§åˆ¤å®š
- å·®åˆ†é‡åˆ¶é™: 20è¡Œè¶…ã§ abort
- å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«åˆ¶é™: .ps1 / .sh / ci/* ã®ã¿
```

---

## ğŸ”— Hooks é€£æº

### on-test-review-resultï¼ˆèµ·å‹•æ¡ä»¶ï¼‰

```bash
when: test-reviewer returns result=PASS
then: ci-specialist starts
```

---

## ğŸ“Š å“è³ªã‚²ãƒ¼ãƒˆåˆ¤å®š

```python
def quality_gate_decision(test_results, coverage, security_scan):
    if test_results.failed > 0:
        return "NO-GO: Tests failed"

    if coverage < 85:
        return "NO-GO: Coverage below 85%"

    if security_scan.high_issues > 0:
        return "NO-GO: High severity security issues"

    return "GO: All quality gates passed"
```

---

## ğŸ¯ æˆåŠŸåŸºæº–

ci-specialist ã®è¨­è¨ˆãŒä»¥ä¸‹ã‚’æº€ãŸã™ã“ã¨ï¼š

1. âœ… è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
2. âœ… å“è³ªã‚²ãƒ¼ãƒˆãŒæ˜ç¢º
3. âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ãŒåŒ…å«
4. âœ… ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ãŒå®šç¾©
5. âœ… è‡ªå‹•ä¿®å¾© CI ãŒå®‰å…¨ã«å‹•ä½œ

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [.github/workflows/ci.yml](../.github/workflows/ci.yml)
- [.github/workflows/security-audit.yml](../.github/workflows/security-audit.yml)
- [.github/workflows/auto-repair.yml](../.github/workflows/auto-repair.yml)

---

**æœ€çµ‚æ›´æ–°**: 2026-02-05
